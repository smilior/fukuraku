# Non-Functional Requirements

## Non-Functional Requirements Template

```markdown
# 非機能要件書

**プロジェクト名**: [Project Name]
**作成日**: [YYYY-MM-DD]
**バージョン**: 1.0

---

## NFR-001: パフォーマンス要件

### レスポンスタイム
- **ページ表示**: <2秒（90パーセンタイル）
- **検索処理**: <1秒（95パーセンタイル）
- **決済処理**: <3秒（99パーセンタイル）

### スループット
- **同時接続ユーザー数**: [数]人
- **ピーク時リクエスト数**: [数] req/sec

### 測定方法
- 負荷テストツール: [ツール名]
- 監視: [監視ツール]

---

## NFR-002: 可用性・信頼性要件

### 可用性
- **目標稼働率**: 99.9%（年間ダウンタイム 8.76時間以内）
- **計画メンテナンス**: 月1回、深夜2:00-4:00（最大2時間）
- **RTO**: <1時間
- **RPO**: <15分

### 信頼性
- **MTBF**: >720時間（30日）
- **MTTR**: <30分
- **エラー率**: <0.1%

### バックアップ
- **頻度**: DB差分バックアップ15分毎、完全バックアップ日次
- **保持期間**: 30日間
- **保存場所**: 別リージョンのS3

---

## NFR-003: セキュリティ要件

### 認証
- **多要素認証（MFA）**: 管理者アカウント必須
- **パスワードポリシー**: 最低12文字、大小英数記号混在
- **セッション**: 30分タイムアウト、HTTPOnly/Secure Cookie

### 暗号化
- **通信**: TLS 1.3以上
- **データ保存時**: AES-256暗号化（DB、ファイル）
- **パスワード**: bcrypt（コスト12以上）

### アクセス制御
- **認可**: ロールベースアクセス制御（RBAC）
- **監査ログ**: 機密操作を記録（誰が、いつ、何を）
- **ログ保持**: 1年間

### コンプライアンス
- **GDPR**: 個人データ削除リクエスト対応
- **PCI DSS**: クレジットカード情報を保存しない

---

## NFR-004: スケーラビリティ要件

### 水平スケーリング
- **Webサーバー**: 負荷に応じてオートスケール（最小3台、最大20台）
- **データベース**: リードレプリカ3台、ライトはマスター1台

### 成長予測
- **年間ユーザー増加率**: [%]
- **3年後想定**: [数]ユーザー、[数]DAU

---

## NFR-005: 保守性・運用性要件

### 監視
- **メトリクス収集**: CPU、メモリ、ディスク、ネットワーク
- **アラート**: エラー率 >5%、レスポンスタイム >3秒

### ログ
- **ログレベル**: INFO以上
- **ログフォーマット**: 構造化JSON
- **ログ集約**: [ツール名]

### デプロイ
- **デプロイ頻度**: 週1回以上
- **デプロイ時間**: <15分
- **ロールバック**: <5分で前バージョンに戻せる
- **ダウンタイム**: ゼロダウンタイムデプロイ（Blue-Green）

---
```

---

## Phase 3: 非機能要件ヒアリング

```
🤖 次に非機能要件を確認します。

【質問 9】重要なパフォーマンス要件は何ですか？（複数選択可）
a) レスポンス速度（2秒以内）
b) 高トラフィック対応（同時接続1万人）
c) データ処理速度
d) 特になし

👤 ユーザー: [回答待ち]
```

```
🤖 【質問 10】必要なセキュリティ要件は何ですか？（複数選択可）
a) ユーザー認証（パスワード）
b) 多要素認証（MFA）
c) 暗号化通信（HTTPS）
d) 個人情報保護（GDPR対応）
e) その他

👤 ユーザー: [回答待ち]
```

```
🤖 【質問 11】可用性の要件はありますか？
a) 高可用性が必要（99.9%以上）
b) 通常レベル（99%程度）
c) 特になし

👤 ユーザー: [回答待ち]
```

```
🤖 【質問 12】スケーラビリティの要件はありますか？
a) 将来的なユーザー増加を見込む（年間成長率: ___%）
b) 現状の規模で十分
c) 未定

👤 ユーザー: [回答待ち]
```

---

## Prioritization Methods

### MoSCoW Method

| カテゴリー      | 説明                                 | 例                                   |
| --------------- | ------------------------------------ | ------------------------------------ |
| **Must Have**   | 必須機能（これがないとリリース不可） | ユーザー登録、商品検索、決済         |
| **Should Have** | 重要だが必須ではない                 | レビュー機能、お気に入り             |
| **Could Have**  | あると良い                           | レコメンド機能、SNS連携              |
| **Won't Have**  | 今回は対象外（将来検討）             | ポイントシステム、サブスクリプション |

### Kano Analysis

| 機能           | 分類         | 説明             |
| -------------- | ------------ | ---------------- |
| 商品検索       | 当たり前品質 | ないと不満       |
| レスポンス速度 | 当たり前品質 | 遅いと不満       |
| レビュー機能   | 一元的品質   | あると満足度向上 |
| AIレコメンド   | 魅力的品質   | あると感動       |

---

## File Naming Conventions

- **English**: `non-functional-requirements-{YYYYMMDD}.md`
- **Japanese**: `non-functional-requirements-{YYYYMMDD}.ja.md`
- **Output path**: `./docs/requirements/non-functional/`
