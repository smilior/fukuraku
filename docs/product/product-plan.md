# プロダクト計画書：副業サラリーマン専用 確定申告アプリ「副楽」

---

## 1. MVPスコープ定義

### シンプルさを守るための判断基準

以下の3つの問いで機能の採否を判断する：

1. **「副業サラリーマンが20万円超の雑所得を申告する」ために必須か？** → Yesなら Must Have
2. **1人開発で3〜4週間以内に実装可能か？** → Noなら後回しまたはOut of Scope
3. **既存の競合（タックスナップ、CalQ Share等）との差別化に直結するか？** → Noなら優先度を下げる

### Must Have（MVP必須機能）

| 機能 | 理由 |
|------|------|
| メールアドレス認証（＋Googleログイン） | ユーザー管理の基盤 |
| 副業収入の手動記録（日付・金額・取引先・種別） | コア機能 |
| 経費の手動記録（日付・金額・カテゴリ・メモ） | コア機能 |
| レシート撮影 → AI-OCR → 自動仕訳提案 | 最大の差別化ポイント。GPT-4o Visionで実装 |
| 20万円超アラート（所得ベースのリアルタイム計算） | ターゲットの最大ペインポイント |
| ダッシュボード（収入・経費・所得の推移グラフ） | 現状把握の基盤 |
| 確定申告サマリー画面（年間収支・控除後所得の一覧） | 申告時の必須情報 |
| オンボーディング（副業タイプ選択、基本情報入力） | 初回体験の最適化 |
| 設定画面（プロフィール、通知設定、データエクスポート） | 基本的なユーザー管理 |

### Nice to Have（v1.1以降で段階的に追加）

| 機能 | 理由 |
|------|------|
| 銀行口座・クレカ自動連携 | 手入力の負荷を大幅削減するが、API連携の実装コストが高い |
| 確定申告書PDF自動生成 | 国税庁フォーマット対応に時間がかかる |
| e-Tax連携（マイナンバーカード） | 技術的ハードルが高い |
| 月次レポートのプッシュ通知 | エンゲージメント向上だがMVPでは不要 |
| 複数副業の個別管理 | 初期はシンプルに1副業想定でも成立する |
| 税理士チャットサポート連携 | パートナーシップ構築が必要 |

### Out of Scope（やらない）

| 機能 | 理由 |
|------|------|
| 青色申告対応（複式簿記） | ターゲットは白色申告の副業サラリーマン。青色対応は市場が既に飽和（freee, 弥生） |
| 消費税申告 | インボイス対応は個人事業主向けであり、副業サラリーマンの大半は免税事業者 |
| 給与所得の管理 | 年末調整済みの本業給与は対象外 |
| 法人向け機能 | 個人副業に特化 |
| 仮想通貨・FXの損益計算 | 専門アプリが存在する（Cryptact等） |
| マルチ言語対応 | 日本国内の税制に特化 |

---

## 2. 主要画面一覧と機能詳細

### 2-1. オンボーディング画面

**目的：** 初回起動時にユーザーの副業タイプを把握し、最適な設定を自動適用する

**主要コンポーネント：**
- ウェルカムスライド（3枚：「レシート撮るだけ」「20万円超えたら教えます」「申告もラクラク」）
- 副業タイプ選択（フリーランス案件 / 物販・せどり / シェアリングエコノミー / コンテンツ販売 / その他）
- 基本情報入力（氏名、副業開始年、想定年間収入レンジ）
- Googleアカウント or メール認証

**ユーザーフロー：**
```
アプリ起動 → ウェルカムスライド → 副業タイプ選択 → 基本情報入力 → 認証 → ダッシュボードへ
```

### 2-2. ホーム / ダッシュボード画面

**目的：** 副業の収支状況を一目で把握し、申告要否の判断を支援する

**主要コンポーネント：**
- **20万円バー**：今年の所得（収入 - 経費）の進捗バー。20万円ラインを視覚的に表示
- **今月の収支カード**：今月の収入合計・経費合計・差引所得
- **年間推移グラフ**：月別の収入・経費・所得の棒グラフ（12ヶ月表示）
- **直近の取引リスト**：最新5件の収入・経費をタイムライン表示
- **クイックアクションボタン**：「+ 収入を記録」「+ 経費を記録」「カメラ（レシート）」

**ユーザーフロー：**
```
ダッシュボード表示 → 20万円バーで状況確認 → クイックアクションで記録 or 詳細画面へ遷移
```

### 2-3. 収入記録画面

**目的：** 副業収入を素早く正確に記録する

**主要コンポーネント：**
- 金額入力（テンキーUI）
- 日付選択（デフォルトは今日）
- 取引先名（テキスト入力 + 過去履歴からサジェスト）
- 収入カテゴリ（副業タイプに応じたプリセット：報酬 / 売上 / 紹介料 / その他）
- メモ欄（任意）
- 「源泉徴収あり」トグル（10.21%自動計算）

**ユーザーフロー：**
```
「+ 収入を記録」タップ → 金額入力 → 取引先・カテゴリ選択 → 保存 → ダッシュボードに反映
```

### 2-4. 経費記録画面（レシート撮影 → AI仕訳）

**目的：** レシート撮影だけで経費を自動記録し、手入力の手間を最小化する

**主要コンポーネント：**
- **カメラ起動ボタン**（メインCTA）
- **AIプレビューカード**：OCR結果（店名・日付・金額）+ AI推定の勘定科目を表示
- **手動修正UI**：AI結果を確認・修正して確定
- **手動入力フォーム**：レシートなしの場合（金額・日付・カテゴリ・メモ）
- **経費カテゴリ**：通信費 / 交通費 / 消耗品費 / 交際費 / 書籍研究費 / 外注費 / その他

**ユーザーフロー：**
```
「カメラ」タップ → レシート撮影 → AI解析（2〜3秒） → プレビュー表示
→ 確認 or 修正 → 保存 → ダッシュボードに反映
```

**AI仕訳ロジック：**
1. GPT-4o Vision APIにレシート画像を送信
2. Structured Outputで `{store_name, date, total_amount, items[], category}` を抽出
3. カテゴリはユーザーの副業タイプと過去の仕訳パターンを考慮して推定
4. 信頼度が低い場合はユーザーに確認を促す

### 2-5. 20万円アラート画面

**目的：** 確定申告が必要になるタイミングを事前に通知し、対策を案内する

**主要コンポーネント：**
- **アラートバナー**：所得が15万円超で「黄色」、20万円超で「赤色」
- **所得計算の内訳**：収入合計 - 経費合計 = 所得の明細
- **予測グラフ**：現在のペースで年末にいくらになるか推計
- **アクションガイド**：
  - 20万円以下の場合 → 「住民税の申告だけでOK」の案内
  - 20万円超の場合 → 「確定申告が必要です」+ 次のステップ案内
- **経費計上のヒント**：「こんな経費を計上できるかも」のサジェスト

**ユーザーフロー：**
```
所得が15万円超過時 → プッシュ通知 → アラート画面へ → 内訳確認 → アクションガイドに従う
```

### 2-6. 確定申告サマリー画面

**目的：** 確定申告に必要な年間収支データを一覧表示し、申告作業を支援する

**主要コンポーネント：**
- **年間サマリーカード**：総収入 / 総経費 / 所得 / 源泉徴収額
- **経費カテゴリ別内訳**：円グラフ + リスト
- **月別収支テーブル**：12ヶ月分の一覧表
- **CSVエクスポートボタン**：確定申告作成コーナーや税理士に渡すための出力
- **確定申告チェックリスト**：提出に必要な書類と準備状況
- **外部リンク**：国税庁の確定申告作成コーナーへのリンク

**ユーザーフロー：**
```
サマリー画面 → 年間データ確認 → CSVエクスポート → 国税庁サイトで申告 or 税理士に提出
```

### 2-7. 設定画面

**目的：** アカウント情報やアプリの動作をカスタマイズする

**主要コンポーネント：**
- プロフィール編集（氏名、副業タイプ）
- 通知設定（20万円アラート、月次リマインド、確定申告期間リマインド）
- データ管理（CSVエクスポート、データ削除）
- サブスクリプション管理（プラン確認・変更）
- ヘルプ / FAQ
- 利用規約・プライバシーポリシー
- ログアウト

---

## 3. 技術スタック推奨

### バイブコーディングで最速に構築するための構成

#### フロントエンド：PWA（Progressive Web App）推奨

| 項目 | 選定 | 理由 |
|------|------|------|
| フレームワーク | **Next.js 15 (App Router)** | Vercelとの親和性最高。バイブコーディングツール（Cursor, Claude Code）のサポートが最も充実 |
| UIライブラリ | **shadcn/ui + Tailwind CSS** | コピペで使えるコンポーネント。AIコード生成との相性が良い |
| 状態管理 | **Zustand** | 軽量でボイラープレート最小 |
| PWA対応 | **next-pwa** | ホーム画面追加、オフライン対応、プッシュ通知が可能 |

**なぜネイティブではなくPWAか：**
- 1人開発で iOS / Android 両対応は現実的でない
- PWAなら単一コードベースでWeb・モバイル両方をカバー
- カメラアクセス（レシート撮影）はPWAでも可能
- App Store審査不要で即デプロイ可能
- 開発工数は従来のネイティブ比で50〜75%削減

#### バックエンド・DB

| 項目 | 選定 | 理由 |
|------|------|------|
| BaaS | **Supabase** | PostgreSQL + Auth + Storage + Edge Functions が一体。無料枠が充実 |
| DB | **Supabase PostgreSQL** | RLS（Row Level Security）で安全なマルチテナント |
| ストレージ | **Supabase Storage** | レシート画像の保存。S3互換 |
| サーバーレス関数 | **Supabase Edge Functions** (Deno) | AI API呼び出し、Webhook処理 |

#### AI機能（OCR・仕訳）

| 項目 | 選定 | 理由 |
|------|------|------|
| レシートOCR + 仕訳 | **OpenAI GPT-4o Vision API** | 画像→構造化データを1回のAPI呼び出しで完結。Structured Outputで精度向上 |
| 代替案 | Google Cloud Vision + GPT-4o | OCR精度をさらに高めたい場合の2段階方式 |

**実装方式：**
```
レシート画像 → Supabase Storageに保存
→ Edge Functionで GPT-4o Vision API呼び出し
→ Structured Output: {store_name, date, amount, items, suggested_category}
→ フロントに返してユーザー確認・保存
```

**コスト概算：** GPT-4o Vision は $2.50/1M input tokens。レシート1枚あたり約500〜1,000トークン消費 → 1枚あたり約0.15〜0.3円。月100枚処理しても月額15〜30円程度。

#### 決済

| 項目 | 選定 | 理由 |
|------|------|------|
| 決済 | **Stripe** | サブスクリプション管理が容易。Supabase webhookとの連携実績豊富 |
| 実装 | **Stripe Checkout + Customer Portal** | コード最小でサブスク管理を実現 |

#### 認証

| 項目 | 選定 | 理由 |
|------|------|------|
| 認証 | **Supabase Auth** | Google OAuth, Email/Password が標準搭載。RLSとシームレス連携 |

#### ホスティング

| 項目 | 選定 | 理由 |
|------|------|------|
| フロントエンド | **Vercel** | Next.jsのデプロイ先として最適。無料枠で十分 |
| バックエンド | **Supabase Cloud** | マネージドで運用負荷ゼロ |

#### 開発ツール

| 項目 | 選定 |
|------|------|
| AIコーディング | **Cursor Pro** ($20/月) + **Claude Code** |
| プロトタイピング | **Lovable** (UIの初期プロトタイプ作成) → Cursorで本格実装 |
| バージョン管理 | **GitHub** |
| CI/CD | **Vercel自動デプロイ**（GitHub連携） |

#### 月次ランニングコスト概算

| サービス | 無料枠内 | 有料時（ユーザー増加後） |
|----------|----------|-------------------------|
| Vercel (Hobby) | $0 | $20/月 (Pro) |
| Supabase (Free) | $0 | $25/月 (Pro) |
| OpenAI API (GPT-4o Vision) | - | $5〜20/月（利用量次第） |
| Stripe | 決済手数料 3.6% | 同左 |
| Cursor Pro | $20/月 | $20/月 |
| ドメイン | - | $12/年 ≒ $1/月 |
| **合計（開発期間）** | **約$20/月** | - |
| **合計（運用開始後）** | - | **約$70〜90/月** |

**SaaS テンプレートの活用：**
Vercel公式の [Next.js Subscription Payments](https://github.com/vercel/nextjs-subscription-payments) テンプレート（Next.js + Supabase + Stripe）を出発点にすることで、認証・決済・DB接続のボイラープレートを大幅に削減できる。

---

## 4. 開発ロードマップ（8週間）

### 前提条件
- 1人開発（バイブコーディング活用）
- 週20〜30時間の開発時間を想定
- Cursor Pro + Claude Code を活用

### Week 1〜2：環境構築・コア機能

**Week 1：プロジェクト立ち上げ＆基盤構築**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 1-2 | Vercel SaaS テンプレートのセットアップ。Supabase プロジェクト作成、DB スキーマ設計（users, incomes, expenses, receipts テーブル） | 動作する開発環境、DBスキーマ |
| Day 3-4 | Supabase Auth 設定（Google OAuth + Email）。オンボーディング画面の実装 | 認証フロー完成 |
| Day 5-7 | ダッシュボード画面のUI実装（shadcn/ui）。20万円バーの実装 | ダッシュボードのモック表示 |

**Week 2：収入・経費記録のコア機能**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 8-9 | 収入記録画面（CRUD）。カテゴリ・取引先のサジェスト機能 | 収入の記録・表示が可能 |
| Day 10-11 | 経費記録画面（手動入力CRUD） | 経費の記録・表示が可能 |
| Day 12-14 | ダッシュボードとデータ連携。年間推移グラフ実装（Recharts）。20万円アラートのロジック実装 | データ連動したダッシュボード |

### Week 3〜4：MVP完成・テスト

**Week 3：AI機能＆コア機能の完成**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 15-17 | レシートOCR機能の実装（GPT-4o Vision API）。Supabase Edge Function。Structured Output設計 | レシート撮影→自動仕訳が動作 |
| Day 18-19 | 確定申告サマリー画面。CSVエクスポート機能 | 年間収支の一覧表示・出力 |
| Day 20-21 | 設定画面。通知設定。プロフィール管理 | 設定機能完成 |

**Week 4：テスト・修正・MVP仕上げ**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 22-23 | Stripe決済の実装（サブスクリプション）。料金プラン設計の反映 | 決済フロー完成 |
| Day 24-25 | PWA設定（next-pwa）。オフライン対応。ホーム画面追加機能 | PWAとして動作 |
| Day 26-28 | E2Eテスト。主要フローの動作確認。バグ修正。パフォーマンス最適化 | **MVP完成** |

**Week 4 完了時の成果物：** 認証 → オンボーディング → 収入/経費記録 → レシートAI仕訳 → 20万円アラート → 確定申告サマリー → 決済 が一通り動作するPWA

### Week 5〜6：ベータ版リリース・フィードバック収集

**Week 5：ベータリリース準備**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 29-30 | ランディングページ作成（Lovableで高速プロトタイプ→調整） | LPページ公開 |
| Day 31-32 | 利用規約・プライバシーポリシーの作成。特定商取引法に基づく表示 | 法務ドキュメント |
| Day 33-35 | ベータテスターの募集（X/Twitter、副業系コミュニティ）。フィードバック収集の仕組み構築（アプリ内フォーム or Googleフォーム） | **ベータ版リリース** |

**Week 6：フィードバック対応**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 36-38 | ベータテスターのフィードバック分析。優先度の高いバグ修正 | バグ修正版 |
| Day 39-42 | UX改善（フィードバックに基づく）。AI仕訳精度のチューニング | 改善版リリース |

### Week 7〜8：改善・正式リリース

**Week 7：品質向上＆マーケティング準備**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 43-45 | エッジケース対応。エラーハンドリング強化。セキュリティレビュー | 品質向上版 |
| Day 46-49 | SEO対策。ブログ記事作成（「副業確定申告の始め方」等）。X/Twitter運用開始 | マーケティング素材 |

**Week 8：正式リリース**

| 日 | タスク | 完成物 |
|----|--------|--------|
| Day 50-52 | 最終テスト。本番環境の安定性確認。監視・アラート設定 | リリース準備完了 |
| Day 53-56 | **正式リリース**。Product Hunt投稿。SNS告知。プレスリリース | **v1.0 正式公開** |

---

## 5. リリース後のプロダクトロードマップ（6ヶ月）

### 確定申告シーズンを軸にしたリリース戦略

```
         10月   11月   12月   1月    2月    3月
          |      |      |      |      |      |
 v1.0 ───┤      |      |      |      |      |
 (MVP)    |      |      |      |      |      |
          | v1.1─┤      |      |      |      |
          | 銀行連携    |      |      |      |
          |      | v1.2─┤      |      |      |
          |      | PDF生成     |      |      |
          |      |      |  確定申告シーズン  |
          |      |      |  ████████████████  |
          |      |      |      |      | v2.0─┤
          |      |      |      |      | e-Tax対応
```

### v1.0（MVP）→ 正式リリース｜10月

**リリース済み機能：**
- 収入・経費の手動記録
- レシートAI仕訳（GPT-4o Vision）
- 20万円アラート
- 確定申告サマリー + CSVエクスポート
- Stripe決済（フリーミアム）

**KPI目標：**
- 登録ユーザー数：500人
- 有料転換率：5%（25人）
- レシート仕訳の正答率：85%以上

### v1.1｜11月 ── 銀行口座・クレカ連携

**追加機能：**
- 銀行口座自動連携（MoneyForward API or Plaid相当のサービス活用）
- クレジットカード明細の自動取込
- 取引の自動カテゴリ分類（AIベース）
- 重複取引検出

**目的：** 確定申告シーズン前に手入力の負荷を大幅削減し、リテンションを向上

**KPI目標：**
- 月間アクティブユーザー率（MAU/登録）：60%以上
- 口座連携率：有料ユーザーの50%以上

### v1.2｜12月 ── 確定申告書PDF生成

**追加機能：**
- 確定申告書B（第一表・第二表）のPDF自動生成
- 収支内訳書の自動作成
- 控除項目の入力支援（ふるさと納税、医療費控除、生命保険料控除）
- 申告書プレビュー＆ダウンロード

**目的：** 確定申告シーズン直前に「このアプリだけで完結する」体験を提供

**KPI目標：**
- 登録ユーザー数：2,000人（確定申告シーズン需要で急増見込み）
- 有料転換率：8%
- PDF生成利用率：有料ユーザーの70%以上

### 確定申告シーズン対応（1月〜3月）

**重点施策：**
- サポート体制強化（FAQ充実、チャットボット導入検討）
- 「確定申告の手順ガイド」コンテンツ公開
- 期限リマインド通知の強化（2/16開始、3/15締切）
- サーバー増強（Supabase Proプランへスケールアップ）
- SEO記事の集中公開（「副業 確定申告 やり方」等のキーワード）

**KPI目標（3月末時点）：**
- 登録ユーザー数：5,000人
- 有料ユーザー数：400人（MRR: 約40〜60万円）
- 確定申告完了報告ユーザー：200人以上

### v2.0｜3月 ── e-Tax連携（確定申告の完全アプリ内完結）

**追加機能：**
- e-Tax API連携によるオンライン申告
- マイナンバーカード認証（ICカードリーダー or スマホNFC）
- 申告データの直接送信
- 受付番号の取得・保管

**目的：** 「帳簿付けから申告まで全てアプリ内で完結」のUXを実現し、最大の差別化を確立

### v2.0以降の検討事項（4月〜）

| 機能 | 優先度 | 時期 |
|------|--------|------|
| AIチャットアドバイザー（経費計上の判断支援） | 高 | v2.1 (4月) |
| 年度切替・過去データ管理 | 高 | v2.1 (4月) |
| 複数副業管理 | 中 | v2.2 (5月) |
| 税理士マッチング機能 | 中 | v2.2 (5月) |
| インボイス対応（消費税申告） | 低 | v3.0 (翌年) |
| 青色申告対応（複式簿記） | 低 | v3.0 (翌年) |

### 年間リリースサイクル

```
4月〜9月：新機能開発・品質改善期間（ユーザーフィードバック反映）
10月〜12月：確定申告準備期間（安定性重視、大型機能リリース）
1月〜3月：確定申告シーズン（サポート重視、バグ修正のみ、新規開発凍結）
```

---

## 付録：競合比較と差別化ポイント

| 項目 | 副楽（本アプリ） | タックスナップ | CalQ Share | freee | マネーフォワード |
|------|---------------------|---------------|-----------|-------|---------------|
| ターゲット | 副業サラリーマン専用 | 個人事業主・フリーランス全般 | 副業（シェアリング中心） | 全般 | 全般 |
| 20万円アラート | あり（リアルタイム） | なし | なし | なし | なし |
| レシートAI仕訳 | GPT-4o Vision（最新AI） | 丸投げ仕分け（有料） | なし | あり | あり |
| 料金 | フリーミアム（無料〜月980円） | 月980円〜 | 完全無料 | 月1,480円〜 | 月980円〜 |
| 複雑さ | 最小（副業に特化） | 中 | 低 | 高 | 高 |
| 確定申告書生成 | v1.2で対応予定 | 対応済 | 対応済（白色のみ） | 対応済 | 対応済 |

**最大の差別化：**
1. **「副業サラリーマン」に完全特化** → 余計な機能がなくシンプル
2. **20万円アラート** → 他のどのアプリにもない独自機能
3. **最新AI（GPT-4o Vision）によるレシート仕訳** → 従来OCRより高精度
4. **バイブコーディングによる高速開発** → 市場の声を素早く反映
